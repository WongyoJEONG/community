<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>글쓰기</title>
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <script th:src="@{/js/script.js}"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        function checkWrite(e) {
            e.preventDefault(); // 기본 전송 막기

            let title = document.getElementById("title");
            let contents = document.getElementById("contents");

            if (title.value.trim().length == 0) {
                Swal.fire({
                    icon: 'warning',
                    title: '제목 입력',
                    text: '제목을 입력해야 합니다.',
                    confirmButtonColor: '#0d6efd'
                });
                return false;
            }

            if (contents.value.trim().length == 0) {
                Swal.fire({
                    icon: 'warning',
                    title: '내용 입력',
                    text: '내용을 입력해야 합니다.',
                    confirmButtonColor: '#0d6efd'
                });
                return false;
            }

            // 유효성 검사 통과 시
            Swal.fire({
                icon: 'success',
                title: '게시글 등록',
                text: '새로운 소모임이 등록되었습니다!',
                showConfirmButton: false,
                timer: 1500
            }).then(() => {
                document.getElementById("writeForm").submit(); // 폼 전송
            });
        }
    </script>
</head>
<body class="bg-light">

<nav class="navbar navbar-dark bg-primary shadow-sm mb-5">
    <div class="container">
        <a class="navbar-brand fw-bold" th:href="@{/}">🏃 소모임 커뮤니티</a>
        <span class="text-white">글쓰기</span>
    </div>
</nav>

<div class="container" style="max-width: 800px;">
    <div class="card shadow-sm">
        <div class="card-header bg-white py-3">
            <h4 class="mb-0 fw-bold text-primary">✏️ 새 소모임 만들기</h4>
        </div>

        <div class="card-body p-4">
            <form id="writeForm" th:action="@{/board/write}" method="post" onsubmit="checkWrite(event)">

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label fw-bold">카테고리</label>
                        <select name="category" class="form-select">
                            <option value="STUDY">📖 STUDY (스터디)</option>
                            <option value="HEALTHY">💪 HEALTHY (운동)</option>
                            <option value="TRIP">✈️ TRIP (여행)</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">최대 인원</label>
                        <div class="input-group">
                            <input type="number" name="capacity" class="form-control" value="5" min="2" max="10">
                            <span class="input-group-text">명</span>
                        </div>
                        <div class="form-text">2명에서 10명 사이로 설정해주세요.</div>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="title" class="form-label fw-bold">제목</label>
                    <input type="text" name="title" id="title" class="form-control" placeholder="모임의 제목을 입력하세요 (예: 강남역 영어회화)" >
                </div>

                <div class="mb-4">
                    <label for="contents" class="form-label fw-bold">내용</label>
                    <textarea name="contents" id="contents" class="form-control" rows="10" placeholder="모임에 대한 자세한 설명을 적어주세요.&#13;&#10;(일시, 장소, 준비물 등)"></textarea>
                </div>

                <hr class="my-4">

                <div class="d-flex justify-content-end gap-2">
                    <a th:href="@{/board/list}" class="btn btn-secondary px-4">취소</a>
                    <button type="submit" class="btn btn-primary px-5 fw-bold">등록하기</button>
                </div>

            </form>
        </div>
    </div>
</div>

<div class="mb-5"></div>

</body>
</html>